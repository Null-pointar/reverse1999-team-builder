<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reverse: 1999 Team Builder</title>
    <link rel="stylesheet" href="style.css">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/qrcode-generator/qrcode.js"></script>
</head>
<body>

    <header class="header">
        <button id="menu-button" class="menu-button">☰</button>
        <h1>Reverse: 1999 Team Builder</h1>
        <!--<button id="lang-button">JP/EN/CN</button>-->
    </header>

    <div id="side-panel-overlay" class="side-panel-overlay hidden">
        <div id="side-panel" class="side-panel">
            <button id="close-panel-button" class="close-panel-button">×</button>
            <nav class="panel-nav">
                <button class="panel-nav-button active" data-panel="teams">Saved Teams</button>
                <button class="panel-nav-button" data-panel="loadteam">Load Team</button>
                <button class="panel-nav-button" data-panel="howtouse">How to Use</button>
            </nav>
            <div class="panel-content-wrapper">
                <div id="panel-content-teams" class="panel-content active">
                    <div class="panel-section">
                        <h3>Save Current Team</h3>
                        <form id="save-team-form">
                            <input type="text" id="team-name-input" placeholder="Team Name (Required)" required>
                            <textarea id="team-desc-input" placeholder="Description..."></textarea>
                            <button type="submit">Save</button>
                        </form>
                    </div>
                    <div class="panel-section">
                        <h3>Team List</h3>
                        <ul id="saved-teams-list"></ul>
                    </div>
                </div>
                
                <div id="panel-content-loadteam" class="panel-content active">
                    <div class="panel-section">
                        <h3>Load Team</h3>
                        <textarea id="team-code-input" placeholder="生成されたチームコードをここに貼り付けてください" rows="4"></textarea>
                        <div class="button-group">
                            <button type="button" id="load-team-from-code-button">チーム読み込み</button>
                            <button type="button" id="clear-input-button">クリア</button>
                        </div>
                        <div id="load-result"></div>
                    </div>
                    <div class="panel-section">
                        <h3>Team List</h3>
                        <ul id="saved-teams-list"></ul>
                    </div>
                    <div class="qr-scanner">
                        <p>QRコード画像をアップロード</p>
                        <input type="file" id="qr-file-input" accept="image/*" onchange="handleQRUpload(event)">
                        <p style="font-size: 12px; color: #666; margin-top: 10px;">
                            ※実際のQR読み取りには追加のライブラリが必要です
                        </p>
                    </div>
                </div>

                <div id="panel-content-howtouse" class="panel-content">
                    <div class="panel-section">
                        <h3>基本的な使い方</h3>
                        <ul>
                            <li><strong>キャラクターを探す:</strong> 各種フィルターや検索バーでキャラクターを絞り込めます。</li>
                            <li><strong>チームを組む:</strong> 一覧からキャラクターを上部のチームスロットへドラッグ＆ドロップします。</li>
                            <li><strong>メンバーの変更:</strong> スロット内のキャラクターを別のスロットへドラッグすると場所を入れ替えられます。</li>
                            <li><strong>メンバーを外す:</strong> スロット内のキャラクターをクリックするとチームから外れます。</li>
                        </ul>
                        <h3>チームの保存と読込</h3>
                        <ol>
                            <li>左上のメニューボタン(☰)からこのパネルを開きます。</li>
                            <li>「Save Current Team」で名前等を入力し保存します。</li>
                            <li>「Team List」の「Load」ボタンで編成を復元できます。</li>
                            <li>「Edit」ボタンで名前と説明を編集できます。</li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>
    </div>

     <section class="team-section">
        <div id="mode-selector" class="mode-selector">
            <button class="mode-btn active" data-mode="mode1">Mode 1</button>
            <button class="mode-btn" data-mode="limbo">深眠域</button>
            <button class="mode-btn" data-mode="4parties">4 Parties</button>
        </div>

        <div class="team-layout-container">
            <div id="team-slots-container" class="team-slots-container"></div>
            
                 <div id="loaded-team-info" class="loaded-team-info">
                    <h4 id="loaded-team-name">チームメモ</h4>
                    <textarea id="loaded-team-desc" placeholder="このチームに関するメモ..."></textarea>
                    <p id="save-status" class="save-status"></p>
                </div>
        </div>
        <div class="team-display-wrapper">
            <div id="team-stats-container" class="team-stats-container hidden">
            </div>
        </div>
    </section>

    <main class="main-content">
        <section class="filter-section">
            <input type="text" id="search-bar" placeholder="Search by character name...">
            <div class="filter-row">
                <div class="filter-group">
                    <p class="filter-label">Attribute</p>
                    <div id="attribute-filters" class="attribute-filters"></div>
                </div>
                <div class="filter-group-separator"></div>
                <div class="filter-group">
                    <p class="filter-label">Damage Type</p>
                    <div id="damage-type-filters" class="damage-type-filters"></div>
                </div>
            </div>
            <p class="filter-label">Specialities</p>
            <div id="specialty-filters" class="specialty-filters"></div>
            <p class="filter-label">Tags</p>
            <div id="tag-filters" class="tag-filters"></div>
        </section>
        <div id="character-list" class="character-list-area"></div>
    </main>


    <footer class="footer">
        <div class="language-switcher">
            
            <button class="lang-button" data-lang="en">English</button>
            <button class="lang-button" data-lang="zh">中文</button>
            <button class="lang-button active" data-lang="ja">日本語</button>
        </div>
        <div class="disclaimer-content">
            
            <div class="disclaimer-text lang-en hidden">
                <p><strong>Disclaimer</strong></p>
                <p>This website is an unofficial fan-made site for the game "Reverse: 1999".<br>
                All copyrights, trademarks, and other intellectual property rights for the game content and images used on this site belong to their provider, Guangzhou Deep-blue Interactive Network Technology Co., Ltd.<br>
                This site is created as a fan activity and is not for commercial purposes.</p>
            </div>
            <div class="disclaimer-text lang-zh hidden">
                <p><strong>免责声明</strong></p>
                <p>本网站是游戏《重返未来：1999》的非官方粉丝网站。<br>
                网站内所使用的游戏图像、内容的著作权、商标权及其他所有知识产权，均归属于其内容提供方广州深蓝互动网络科技有限公司。<br>
                本网站作为粉丝活动的一部分而创建，不用于任何商业目的。</p>
            </div>
            <div class="disclaimer-text lang-ja">
                <p><strong>免責事項</strong></p>
                <p>本サイトは、ゲーム「リバース1999」の非公式ファンサイトです。<br>
                サイト内で使用しているゲーム画像の著作権、商標権、その他全ての知的財産権は、当該コンテンツの提供元である Guangzhou Deep-blue Interactive Network Technology Co., Ltd. に帰属します。<br>
                当サイトはファン活動の一環として作成したものであり、営利目的ではありません。</p>
            </div>
        </div>
    </footer>

    <div id="share-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <button id="close-modal-button" class="close-modal-button">×</button>
            <h3>Share Team</h3>
            <p>Copy this link or scan the QR code to share.</p>
            <input type="text" id="share-url-input" readonly>
            <button id="copy-url-button">Copy Link</button>
            <div id="qrcode-display"></div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>